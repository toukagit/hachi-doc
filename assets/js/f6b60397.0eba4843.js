"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[45],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return h}});var o=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=o.createContext({}),l=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=l(e.components);return o.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},g=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),g=l(t),h=a,p=g["".concat(s,".").concat(h)]||g[h]||d[h]||i;return t?o.createElement(p,r(r({ref:n},u),{},{components:t})):o.createElement(p,r({ref:n},u))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,r=new Array(i);r[0]=g;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var l=2;l<i;l++)r[l]=t[l];return o.createElement.apply(null,r)}return o.createElement.apply(null,t)}g.displayName="MDXCreateElement"},3485:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return c},metadata:function(){return l},toc:function(){return d}});var o=t(7462),a=t(3366),i=(t(7294),t(3905)),r=["components"],c={title:"Account system",sidebar_label:"Account system",description:"",sidebar_position:3},s="Account system",l={unversionedId:"login",id:"version-1.0.0/login",title:"Account system",description:"",source:"@site/i18n/en/docusaurus-plugin-content-docs/version-1.0.0/login.md",sourceDirName:".",slug:"/login",permalink:"/hachi-doc/login",tags:[],version:"1.0.0",sidebarPosition:3,frontMatter:{title:"Account system",sidebar_label:"Account system",description:"",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"In-app purchase",permalink:"/hachi-doc/IAP"},next:{title:"Other functions",permalink:"/hachi-doc/other"}},u={},d=[{value:"1\u3001When the account system appears",id:"1when-the-account-system-appears",level:3},{value:"2\u3001Instructions",id:"2instructions",level:3},{value:"3\u3001Account login",id:"3account-login",level:3},{value:"4\u3001Account logout",id:"4account-logout",level:3},{value:"5\u3001Login Mode Query interface",id:"5login-mode-query-interface",level:3},{value:"6\u3001Account deletion",id:"6account-deletion",level:3},{value:"7\u3001Account binding",id:"7account-binding",level:3},{value:"8\u3001Forced binding",id:"8forced-binding",level:3},{value:"9\u3001Automatic login",id:"9automatic-login",level:3},{value:"10\u3001Returns the current account type",id:"10returns-the-current-account-type",level:3},{value:"11\u3001Returns whether automatic login is currently available",id:"11returns-whether-automatic-login-is-currently-available",level:3},{value:"12\u3001Q&amp;A",id:"12qa",level:3}],g={toc:d};function h(e){var n=e.components,c=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},g,c,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"account-system"},"Account system"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Before starting the integration of the account system, please confirm the timing of the account system and select the login method to be supported. We provide visitor login, email login and third-party login methods."),(0,i.kt)("p",{parentName:"div"},"In addition to account login, we also support account deletion (mandatory), login method query (mandatory), account logout, account binding, mandatory binding, automatic login, return to the current account type, return to the current can automatically log in.    "),(0,i.kt)("p",{parentName:"div"},"The HaChi SDK only provides a login interface, and the login interface developers can design and make their own according to the game UI style and style."))),(0,i.kt)("h3",{id:"1when-the-account-system-appears"},"1\u3001When the account system appears"),(0,i.kt)("p",null,"After entering the game, the login interface is displayed directly. Players must fill in/check the information to complete the login and enter the game. (Only enter the display game login screen for the first time, and then use the selected method to log in directly.)\n",(0,i.kt)("img",{src:t(6610).Z,width:"1338",height:"426"})),(0,i.kt)("p",null,"Players can enter the game experience immediately by silent login, and bind the account at the appropriate game location. (Non-tourist accounts enter the game, do not show the binding button.)"),(0,i.kt)("p",null,(0,i.kt)("img",{src:t(8562).Z,width:"1396",height:"390"})),(0,i.kt)("h3",{id:"2instructions"},"2\u3001Instructions"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Separate calls to visitor login, Google login, Facebook login, and Apple login return different userids. (The case of account binding is special.)"),(0,i.kt)("li",{parentName:"ol"},"Note that login is to call the login interface, and binding the tourist account to the third-party account after successful login is the interface to call the binding account. Only when the account binding interface is called, the tourist account and the third-party account will be bound in the SDK."),(0,i.kt)("li",{parentName:"ol"},"After the login of non-tourist account type is successful, the binding function is not provided (that is, the binding button is not displayed). The login type returned after the tourist is successfully bound is the type of the bound three-party account, and the returned UserID is the same as the UserID returned when the tourist logs in.")),(0,i.kt)("h3",{id:"3account-login"},"3\u3001Account login"),(0,i.kt)("p",null,"Login type"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"public enum HCLoginType\n{\n    // GUESTER\n    LOGIN_BY_GUESTER = 0,\n\n    // Email account login (not supported)\n    LOGIN_BY_EMAIL = 1,\n\n    // Google\n    LOGIN_BY_GOOGLE = 2,\n\n    // Facebook\n    LOGIN_BY_FACEBOOK = 3,\n\n    // Apple\n    LOGIN_BY_Apple = 4,\n\n    // Auto\n    LOGIN_BY_AUTO = 10,\n}\n")),(0,i.kt)("p",null,"Login status"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"}," public enum HCLoginStatus\n{\n    // Login successful\n    LOGIN_STATUS_SUCC = 0,\n\n    // The login was cancelled by the user\n    LOGIN_STATUS_CANCEL = 1,\n\n    // Automatic login has no cached data\n    LOGIN_STATUS_NO_CACHE = 2,\n\n    // Login failure\n    LOGIN_STATUS_FAILED = -1\n}\n")),(0,i.kt)("p",null,"Login"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'public void ButtonEvent_GuestLogin()\n{\n    HCSDKManager.Instance.Login(HCLoginType.LOGIN_BY_GUESTER, _loginAction);\n}\n\nvoid Start()\n{\n    _loginAction = (LoginInfo) =>\n    {\n        Debug.Log($"Landing callback {LoginInfo.loginStatus} type:{LoginInfo.userInfo.loginType} msg:{LoginInfo.loginMsg} userId:{LoginInfo.userInfo.userID} token:{LoginInfo.userInfo.token}");\n        if (LoginInfo.loginStatus == HCLoginStatus.LOGIN_STATUS_SUCC)\n        {\n            // Successful landing\n            _userId = LoginInfo.userInfo.userID;\n            _userType = LoginInfo.userInfo.loginType;\n            _token = LoginInfo.userInfo.token;\n        }\n        else\n        {\n            // Login failure\n            _userId = "";\n            _userType = HCLoginType.LOGIN_BY_GUESTER;\n            _token = "";\n        }\n};\n')),(0,i.kt)("h3",{id:"4account-logout"},"4\u3001Account logout"),(0,i.kt)("p",null,"The account logout interface can be invoked when the game switches the account to do the logout operation. The SDK will call back the game after completing the account exit. No requirement scenario can not be called."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"HCSDKManager.Instance.Logout();\n")),(0,i.kt)("h3",{id:"5login-mode-query-interface"},"5\u3001Login Mode Query interface"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"List<HCLoginType> list = HCSDKManager.Instance.AvailableLoginChannelList();\n")),(0,i.kt)("h3",{id:"6account-deletion"},"6\u3001Account deletion"),(0,i.kt)("p",null,"In order to enhance the transparency of the Android ecosystem, Google has expanded the control of users over their data. Games that require support for account login must provide an entry for users to delete their accounts. Must be called in place with the interface."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"HCSDKManager.Instance.DeleteAccount();\n")),(0,i.kt)("h3",{id:"7account-binding"},"7\u3001Account binding"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Instructions")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ol",{parentName:"div"},(0,i.kt)("li",{parentName:"ol"},"The account binding function is to bind the tourist account to the tripartite account service when the visitor logs in the game."),(0,i.kt)("li",{parentName:"ol"},"Only the tourist account can be bound to the third party account, and the tourist account cannot be bound again after being bound once. If the binding interface is called again, the status code of the bound account will be returned;"),(0,i.kt)("li",{parentName:"ol"},"The binding button can no longer be displayed after binding. The bind button is displayed when the visitor login type is based on loginType in the callback."),(0,i.kt)("li",{parentName:"ol"},"The UserID returned after the tourist account is bound to the third party account is still the UserID of the tourist account, but the two are bound in the SDK."),(0,i.kt)("li",{parentName:"ol"},"As long as the tourist account has not been bound to a social account, it has the right to be bound to a social account; If the social media account has been linked to another tourist account, it has the right to force binding. This involves forcibly binding interfaces."),(0,i.kt)("li",{parentName:"ol"},"When the user uses the bound social account to bind, the game can pop up the interface to list two accounts and the corresponding game progress, so that the player can choose which social account to bind. After the player selects, the mandatory binding interface can be called."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("font",{color:"#ff0000"}," After the binding is successful, the game needs to determine whether the UserID returned after the binding is consistent with the current login UserID. If not, the progress needs to be switched to the corresponding game progress of the UserID returned after the binding is successful (switching account). "))))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"Binding type\npublic enum HCBindAccountStatus\n    {\n        // Binding failure\n        BIND_CODE_FAILED = -1,\n        \n        // Binding successful\n        BIND_CODE_SUCC = 0,\n        \n        // unbind\n        BIND_CODE_CANCEL = 1,\n        \n        // An account has been bound and needs to be selected\n        BIND_CODE_SELECT = 2,\n    }\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'void Start()\n{   \n    _bindAccountCallback = (BindInfo) =>\n    {\n    Debug.Log($"Bound callback {BindInfo.bindStatus} type:{BindInfo.userInfo.loginType} msg:{BindInfo.bindMsg} userId:{BindInfo.userInfo.userID} token:{BindInfo.userInfo.token} userIdList:{BindInfo.userIDs}");\n    if (BindInfo.bindStatus == HCBindAccountStatus.BIND_CODE_SELECT)\n    {\n        HCDebugger.LogDebug("Bind callback - Select screen");\n        return;\n    }\n\n    if (BindInfo.bindStatus == HCBindAccountStatus.BIND_CODE_SUCC)\n    {\n        HCDebugger.LogDebug("Bind callback - Bind successfully");\n        if (!BindInfo.userInfo.userID.Equals(_userId))\n        {\n            HCDebugger.LogDebug($"Bind callback - Bind successfully - Log in again userId:{BindInfo.userInfo.userID} _userId:{_userId}");\n                    \n            return;\n        }\n\n            HCToast.ShowToast("Binding successful");\n            return;\n    }\n\n    HCToast.ShowToast($"Binding failure {BindInfo.bindMsg}");\n    };\n}\n\npublic void ButtonEvent_BindAccount()\n{\n\n    HCSDKManager.Instance.BindAccount(HCLoginType.LOGIN_BY_GOOGLE, _bindAccountCallback);\n}\n')),(0,i.kt)("h3",{id:"8forced-binding"},"8\u3001Forced binding"),(0,i.kt)("p",null,"When the user uses the social account that has been bound to bind the operation, the game can pop up the interface to list the two accounts and the corresponding game progress, for the player to choose which social account to bind. After the player selects, the mandatory binding interface can be called."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'void Start()\n{   \n    _bindAccountCallback = (BindInfo) =>\n    {\n    Debug.Log($"Bound callback {BindInfo.bindStatus} type:{BindInfo.userInfo.loginType} msg:{BindInfo.bindMsg} userId:{BindInfo.userInfo.userID} token:{BindInfo.userInfo.token} userIdList:{BindInfo.userIDs}");\n    if (BindInfo.bindStatus == HCBindAccountStatus.BIND_CODE_SELECT)\n    {\n        HCDebugger.LogDebug("Bind callback - Select screen");\n        return;\n    }\n\n    if (BindInfo.bindStatus == HCBindAccountStatus.BIND_CODE_SUCC)\n    {\n        HCDebugger.LogDebug("Bind callback - Bind successfully");\n        if (!BindInfo.userInfo.userID.Equals(_userId))\n        {\n            HCDebugger.LogDebug($"Bind callback - Bind successfully - Log in again userId:{BindInfo.userInfo.userID} _userId:{_userId}");\n                    \n            return;\n        }\n\n            HCToast.ShowToast("Binding successful");\n            return;\n    }\n\n    HCToast.ShowToast($"Binding failure {BindInfo.bindMsg}");\n    };\n}\n\npublic void ButtonEvent_ForceBindAccount()\n{\n    HCSDKManager.Instance.ForceBindAccount("", _bindAccountCallback);\n}\n')),(0,i.kt)("h3",{id:"9automatic-login"},"9\u3001Automatic login"),(0,i.kt)("p",null,"The SDK automatically logs in based on the type of the last login. You can use the IsCanAutoLogin interface to determine whether the automatic login interface is available. If the automatic login interface is invoked when it is not available, a login failure message is displayed."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"HCSDKManager.Instance.AutoLogin();\n")),(0,i.kt)("h3",{id:"10returns-the-current-account-type"},"10\u3001Returns the current account type"),(0,i.kt)("p",null,"After successful login, obtain the type of the current account. The game side can determine whether to display the binding interface according to the result returned by this interface."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"HCLoginType accountType = HCSDKManager.Instance.GetAccountType();\n")),(0,i.kt)("h3",{id:"11returns-whether-automatic-login-is-currently-available"},"11\u3001Returns whether automatic login is currently available"),(0,i.kt)("p",null,"Based on the result returned by this interface, the game can determine whether it can directly invoke the 'AutoLogin' interface for automatic silent login. If not, you need to display the Login interface, and then call the 'login' interface according to the login type selected by the player."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"bool isCanAutoLogin = HCAccountManager.Instance.IsCanAutoLogin();\n")),(0,i.kt)("h3",{id:"12qa"},"12\u3001Q&A"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 1\u3001 Can one Google account correspond to multiple game accounts? "),(0,i.kt)("br",{parentName:"p"}),"\n","No. One Google account can only correspond to one game account.  "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 2\u3001First call the visitor login, and then call Google login, at this time the tourist account and Google account will be bound\uff1f    "),(0,i.kt)("br",{parentName:"p"}),"\n","No. Calling visitor login first, and then calling Google login, will return a new UserID as a new account to play the game. Only when the binding interface is called, the binding of the visitor account and Google account will occur, returning the same UserID, that is, the UserID of the visitor account, using the same game process.\nHowever, the tourist UserID is related to the device ID, and if the device ID changes, the previous unbound tourist account may be lost.      "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 3\u3001Log in as a tourist first, return UserID1, after the game progress, select Google account binding, will my UserID change\uff1f"),(0,i.kt)("br",{parentName:"p"}),"\n","It won't change. After binding, the UserID is still UserID1, but a binding is made inside the SDK. Equivalent to the binding behavior of the tourist account, the return is still the original tourist account ID.    "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 4\u3001Enter the game select Google login, after the game progress, re-enter the game select visitors login, after the game progress, click Google account binding. What happens at this point\uff1f"),(0,i.kt)("br",{parentName:"p"}),"\n","When the Google account with existing progress is bound, the SDK will return two userids to the game, that is, the UserID corresponding to the current tourist account and the Google account with existing progress. The game can make its own interface to select the UserID corresponding to the Google account to be bound. Then the UserID selected by the player is passed to the SDK through the forced binding interface to forcibly bind the Google account.   "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 5\u3001For A game that defaults to visitor login, I first use device A to play progress and bind my only Google account, and then I use device B to play progress and bind my only Google account, what happens at this time? "),(0,i.kt)("br",{parentName:"p"}),"\n","This case is the same as 4, are bound to the existing Google account."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 6\u3001Will the newly generated userids be repeated?   "),(0,i.kt)("br",{parentName:"p"}),"\n","No. The newly generated userids are unique and will not be repeated.  "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 7\u3001Can I verify the account system in Unity Editor?  "),(0,i.kt)("br",{parentName:"p"}),"\n","Agreed. The Unity Editor can debug the account system."))}h.isMDXComponent=!0},6610:function(e,n,t){n.Z=t.p+"assets/images/login01-930a697a90a0026e6b85af51db505085.png"},8562:function(e,n,t){n.Z=t.p+"assets/images/login02-d48666f871dca5bc59be433892fbfd65.png"}}]);