"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3211],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),l=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=l(e.components);return o.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},g=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),g=l(n),h=a,p=g["".concat(s,".").concat(h)]||g[h]||d[h]||i;return n?o.createElement(p,r(r({ref:t},u),{},{components:n})):o.createElement(p,r({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=g;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var l=2;l<i;l++)r[l]=n[l];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}g.displayName="MDXCreateElement"},3805:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return c},metadata:function(){return l},toc:function(){return d}});var o=n(7462),a=n(3366),i=(n(7294),n(3905)),r=["components"],c={title:"Account system",sidebar_label:"Account system",description:"",sidebar_position:3},s="Account system",l={unversionedId:"login",id:"version-4.0.0/login",title:"Account system",description:"",source:"@site/i18n/en/docusaurus-plugin-content-docs/version-4.0.0/login.md",sourceDirName:".",slug:"/login",permalink:"/hachi-doc/login",tags:[],version:"4.0.0",sidebarPosition:3,frontMatter:{title:"Account system",sidebar_label:"Account system",description:"",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"In-app purchase",permalink:"/hachi-doc/IAP"},next:{title:"Other functions",permalink:"/hachi-doc/other"}},u={},d=[{value:"Common interface",id:"common-interface",level:2},{value:"1\u3001Account login",id:"1account-login",level:3},{value:"2\u3001Log in to the account information interface",id:"2log-in-to-the-account-information-interface",level:3},{value:"3\u3001Login account information interface multi-language setting interface",id:"3login-account-information-interface-multi-language-setting-interface",level:3},{value:"Other interface",id:"other-interface",level:2},{value:"1\u3001When the account system appears",id:"1when-the-account-system-appears",level:3},{value:"2\u3001Instructions",id:"2instructions",level:3},{value:"3\u3001Account logout",id:"3account-logout",level:3},{value:"4\u3001Login Mode Query interface",id:"4login-mode-query-interface",level:3},{value:"5\u3001Account deletion",id:"5account-deletion",level:3},{value:"6\u3001Account binding",id:"6account-binding",level:3},{value:"7\u3001Forced binding",id:"7forced-binding",level:3},{value:"8\u3001Automatic login",id:"8automatic-login",level:3},{value:"9\u3001Returns the current account type",id:"9returns-the-current-account-type",level:3},{value:"10\u3001Returns whether automatic login is currently available",id:"10returns-whether-automatic-login-is-currently-available",level:3},{value:"Q&amp;A",id:"qa",level:2}],g={toc:d};function h(e){var t=e.components,c=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},g,c,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"account-system"},"Account system"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Before starting the integration of the account system, please confirm the timing of the account system and select the login method to be supported. We provide visitor login, email login and third-party login methods.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"In addition to account login, we also support account deletion, login method query, account logout, account binding, mandatory binding, automatic login, return to the current account type, return to the current can automatically log in.    ")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"HachiSDK provides login interface and ",(0,i.kt)("a",{parentName:"p",href:"#2log-in-to-the-account-information-interface"},"Login account information interface"),". Developers can design and make account information interface according to game UI style and style or use the login account information interface provided by SDK.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"When you log in with Google Games, you need to add your Google account to your Google Background Test account."))))),(0,i.kt)("h2",{id:"common-interface"},"Common interface"),(0,i.kt)("h3",{id:"1account-login"},"1\u3001Account login"),(0,i.kt)("p",null,"Login type"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"public enum HMLoginType\n{\n    // GUESTER login\n    LOGIN_BY_GUESTER = 0,\n\n    // Apple login\n    LOGIN_BY_Apple = 4,\n\n    // Google Play Games Services login\n    LOGIN_BY_GOOGLE_PLAY_GAMES_SERVICES = 9,\n\n    // GameCenter login\n    LOGIN_BY_GAMECENTER = 10,\n\n    // Google Play Games Services auto login\n    LOGIN_BY_GOOGLE_PLAY_GAMES_SERVICES_AUTO = 101,\n\n    // GameCenter auto login\n    LOGIN_BY_GAMECENTER_AUTO = 102,\n}\n")),(0,i.kt)("p",null,"Login status"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"}," public enum HMLoginStatus\n{\n    // Login successful\n    LOGIN_STATUS_SUCC = 0,\n\n    // The login was cancelled by the user\n    LOGIN_STATUS_CANCEL = 1,\n\n    // Automatic login has no cached data\n    LOGIN_STATUS_NO_CACHE = 2,\n\n    // Login failure\n    LOGIN_STATUS_FAILED = -1\n}\n")),(0,i.kt)("p",null,"Login"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'public void ButtonEvent_Login()\n{\n    HachiMgr.Instance.Login(HMLoginType.LOGIN_BY_GOOGLE_PLAY_GAMES_SERVICES_AUTO, _loginAction);\n}\n\nvoid Start()\n{\n    _loginAction = (LoginInfo) =>\n    {\n        Debug.Log($"Landing callback {LoginInfo.loginStatus} type:{LoginInfo.userInfo.loginType} msg:{LoginInfo.loginMsg} userId:{LoginInfo.userInfo.userID} token:{LoginInfo.userInfo.token}");\n        if (LoginInfo.loginStatus == HMLoginStatus.LOGIN_STATUS_SUCC)\n        {\n            // Successful landing\n            _userId = LoginInfo.userInfo.userID;\n            _userType = LoginInfo.userInfo.loginType;\n            _token = LoginInfo.userInfo.token;\n        }\n        else\n        {\n            // Login failure\n            _userId = "";\n            _userType = HMLoginType.LOGIN_BY_GOOGLE_PLAY_GAMES_SERVICES_AUTO;\n            _token = "";\n        }\n};\n')),(0,i.kt)("p",null,"The login types LOGIN_BY_GOOGLE_PLAY_GAMES_SERVICES_AUTO, LOGIN_BY_GAMECENTER_AUTO, and others operate similarly to social login types, featuring both login and bind functionalities. However, in the event of initial login failure, the SDK internally switches to a guest login type (unlike other social logins that simply return a failure). This triggers the guest account logic. Subsequent calls to this type will prioritize guest login and attempt to bind the social type. ",(0,i.kt)("font",{color:"#ff0000"},"Developers need not concern themselves with the internal processing logic; they should handle actions based on the returned login type (e.g., displaying a bind button for guest types).")),(0,i.kt)("h3",{id:"2log-in-to-the-account-information-interface"},"2\u3001Log in to the account information interface"),(0,i.kt)("p",null,"note:",(0,i.kt)("br",null),"\nSDK Adds the pop-up window of account information, and processes the interface of account binding/account deletion and related logic through the SDK.",(0,i.kt)("br",null),"\nThe developer needs to act on the information in the close callback (_closeCallback) : ",(0,i.kt)("br",null)),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"If the user switches the account in the pop-up interface of account information, that is, the first parameter is true, the game side needs to process the game progress archive according to the userID (the third parameter) returned by the SDK after the switch. ",(0,i.kt)("br",null)),(0,i.kt)("li",{parentName:"ul"},"If the user deletes the account in the pop-up interface of account information, that is, if the second parameter is true, the userID returned by the third parameter is empty, the game side needs to return to the main interface or restart the game, and call the login method again to log in. ",(0,i.kt)("br",null)),(0,i.kt)("li",{parentName:"ul"},"If the two parameters are false at the same time, the account has not changed and no processing is required on the game side. ",(0,i.kt)("br",null))),(0,i.kt)("p",null,"The first and second arguments cannot be true at the same time. ",(0,i.kt)("br",null)),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'/// <summary>\n/// \n/// </summary>\n/// <param name="_loginType">The login method used by the game is confirmed by the requirements document</param>\n/// <param name="_closeCallback">The first parameter is whether the current account switchover is performed. For example, true is returned when the pop-up is closed after the account switchover succeeds. Otherwise, false is returned</param>\n/// <param name="_closeCallback">The second parameter is: whether the current account is deleted. For example, true is returned when the pop-up is closed after the account is successfully deleted. Otherwise, false is returned</param>\n/// <param name="_closeCallback">The third parameter is: the current userId</param>\n/// <param name="openResult">The fourth parameter indicates whether it opened successfully. true: Opened successfully, false: opened failed,msg: reason for failure.</param>\npublic void OpenAccountMenu(HMLoginType _loginType, Action<bool,bool,string> _closeCallback,Action<bool,string> openResult);\n\ne.g.\npublic void Button_OpenAccountMenu()\n{\n    // When the interface is closed, a callback is triggered. You can determine whether the account is switched or deleted based on the parameters in the callback\n    HachiMgr.Instance.OpenAccountMenu(HMLoginType.LOGIN_BY_Apple, (isSwitchAccount, isDeleteAccount, userId) =>\n    {\n        HMDebugger.LogDebug("account menu isSwitchAccount:" + isSwitchAccount + "  isDeleteaAccount:" + isDeleteAccount + " userId:" + userId + "loginType:" + HMLoginType.LOGIN_BY_Apple.ToString());\n    },(result,msg)=>\n    {\n        HMDebugger.LogDebug("account menu result:"+result+" msg:"+msg);\n    });\n}\n')),(0,i.kt)("p",null,"Instructions:\nThe pop-up window of account information is added to the SDK. There are two states of the pop-up window of account information, one is for tourists to log in with an unbound third-party account (Figure 1), and the other is for a bound third-party account:"),(0,i.kt)("center",null,(0,i.kt)("img",{src:"../img/HCSDK/image48.png",width:"30%",height:"30%"})," ",(0,i.kt)("img",{src:"../img/HCSDK/image49.png",width:"30%",height:"30%"})),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Custom login is not bound to an account")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Click User ID to copy the user ID to the clipboard;"),(0,i.kt)("li",{parentName:"ul"},"Click the account binding button and call the login popup of the corresponding login mode. If the login mode is Google Game login, call the Google Game login popup window (for the time being, only one login mode is supported for a game). After the User successfully logs in, the User ID will be bound to the corresponding account;"),(0,i.kt)("li",{parentName:"ul"},"If the binding behavior of the three accounts has occurred, the userids of the bound accounts and the userids of the current process will be displayed for the player to select. After the player selects one of the userids to bind, the progress of the userids will be lost;")),(0,i.kt)("center",null,(0,i.kt)("img",{src:"../img/HCSDK/image50.png",width:"30%",height:"30%"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Click Delete account button, check the box twice to confirm whether to delete, click OK button to delete the current User ID and binding relationship;")),(0,i.kt)("center",null,(0,i.kt)("img",{src:"../img/HCSDK/image51.png",width:"30%",height:"30%"})),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Bound account")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Click User ID to copy the user ID to the clipboard;"),(0,i.kt)("li",{parentName:"ul"},"Click the switch account button and call the corresponding login mode of the game access pop-up window. If the game access is Google Game login mode, the Google game login pop-up window will pop up (for the time being, only one login mode is supported for a game), and the game archive will be switched together after the user successfully switches the account"),(0,i.kt)("li",{parentName:"ul"},"Click Delete account button, check the box twice to confirm whether to delete, click OK button to delete the current User ID and binding relationship;")),(0,i.kt)("h3",{id:"3login-account-information-interface-multi-language-setting-interface"},"3\u3001Login account information interface multi-language setting interface"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'/// <summary>\n/// Set multiple languages on the account page, for example, en/ja/ko/ru/vi/zh/ zh-hk/zh-tw, if the system language is not set\n/// </summary>\n/// <param name="languageCode"></param>\npublic void SetAccountMenuLanguageCode(string languageCode);\n\ne.g.\nHachiMgr.Instance.SetAccountMenuLanguageCode("en");\n')),(0,i.kt)("p",null,"The game can set the language of the login account information interface through this interface, and display the system language when it is not set."),(0,i.kt)("h2",{id:"other-interface"},"Other interface"),(0,i.kt)("h3",{id:"1when-the-account-system-appears"},"1\u3001When the account system appears"),(0,i.kt)("p",null,"After entering the game, the login interface is displayed directly. Players must fill in/check the information to complete the login and enter the game. (Only enter the display game login screen for the first time, and then use the selected method to log in directly.)\n",(0,i.kt)("img",{src:n(6610).Z,width:"1338",height:"426"})),(0,i.kt)("p",null,"Players can enter the game experience immediately by silent login, and bind the account at the appropriate game location. (Non-tourist accounts enter the game, do not show the binding button.)"),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(8562).Z,width:"1396",height:"390"})),(0,i.kt)("h3",{id:"2instructions"},"2\u3001Instructions"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Separate calls to visitor login, and Apple login return different userids. (The case of account binding is special.)"),(0,i.kt)("li",{parentName:"ol"},"Note that login is to call the login interface, and binding the tourist account to the third-party account after successful login is the interface to call the binding account. Only when the account binding interface is called, the tourist account and the third-party account will be bound in the SDK."),(0,i.kt)("li",{parentName:"ol"},"After the login of non-tourist account type is successful, the binding function is not provided (that is, the binding button is not displayed). The login type returned after the tourist is successfully bound is the type of the bound three-party account, and the returned UserID is the same as the UserID returned when the tourist logs in.")),(0,i.kt)("h3",{id:"3account-logout"},"3\u3001Account logout"),(0,i.kt)("p",null,"The account logout interface can be invoked when the game switches the account to do the logout operation. The SDK will call back the game after completing the account exit. No requirement scenario can not be called."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"HachiMgr.Instance.Logout();\n")),(0,i.kt)("h3",{id:"4login-mode-query-interface"},"4\u3001Login Mode Query interface"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"List<HMLoginType> list = HachiMgr.Instance.AvailableLoginChannelList();\n")),(0,i.kt)("h3",{id:"5account-deletion"},"5\u3001Account deletion"),(0,i.kt)("p",null,"In order to enhance the transparency of the Android ecosystem, Google has expanded the control of users over their data. Games that require support for account login must provide an entry for users to delete their accounts. Must be called in place with the interface."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"HachiMgr.Instance.DeleteAccount();\n")),(0,i.kt)("h3",{id:"6account-binding"},"6\u3001Account binding"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Instructions")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ol",{parentName:"div"},(0,i.kt)("li",{parentName:"ol"},"The account binding function is to bind the tourist account to the tripartite account service when the visitor logs in the game."),(0,i.kt)("li",{parentName:"ol"},"Only the tourist account can be bound to the third party account, and the tourist account cannot be bound again after being bound once. If the binding interface is called again, the status code of the bound account will be returned;"),(0,i.kt)("li",{parentName:"ol"},"The binding button can no longer be displayed after binding. The bind button is displayed when the visitor login type is based on loginType in the callback."),(0,i.kt)("li",{parentName:"ol"},"The UserID returned after the tourist account is bound to the third party account is still the UserID of the tourist account, but the two are bound in the SDK."),(0,i.kt)("li",{parentName:"ol"},"As long as the tourist account has not been bound to a social account, it has the right to be bound to a social account; If the social media account has been linked to another tourist account, it has the right to force binding. This involves forcibly binding interfaces."),(0,i.kt)("li",{parentName:"ol"},"When the user uses the bound social account to bind, the game can pop up the interface to list two accounts and the corresponding game progress, so that the player can choose which social account to bind. After the player selects, the mandatory binding interface can be called."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("font",{color:"#ff0000"}," After the binding is successful, the game needs to determine whether the UserID returned after the binding is consistent with the current login UserID. If not, the progress needs to be switched to the corresponding game progress of the UserID returned after the binding is successful (switching account). "))))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"Binding type\npublic enum HMBindAccountStatus\n    {\n        // Binding failure\n        BIND_CODE_FAILED = -1,\n        \n        // Binding successful\n        BIND_CODE_SUCC = 0,\n        \n        // unbind\n        BIND_CODE_CANCEL = 1,\n        \n        // An account has been bound and needs to be selected\n        BIND_CODE_SELECT = 2,\n    }\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'void Start()\n{   \n    _bindAccountCallback = (BindInfo) =>\n    {\n    \n        var bindStatus = BindInfo.bindStatus;\n        var bindMsg = BindInfo.bindMsg;\n        var userIdList = BindInfo.userIDs;\n        var loginType = BindInfo.userInfo.loginType;\n        var userID = BindInfo.userInfo.userID;\n        var token = BindInfo.userInfo.token;\n        var nickName = BindInfo.userInfo.nickName;\n        var photoUrl = BindInfo.userInfo.photoUrl;\n        \n        Debug.Log($"Bound callback {BindInfo.bindStatus} type:{BindInfo.userInfo.loginType} msg:{BindInfo.bindMsg} userId:{BindInfo.userInfo.userID} token:{BindInfo.userInfo.token} userIdList:{BindInfo.userIDs}");\n        if (BindInfo.bindStatus == HMBindAccountStatus.BIND_CODE_SELECT)\n        {\n            HMDebugger.LogDebug("Bind callback - Select screen");\n            return;\n        }\n\n        if (BindInfo.bindStatus == HMBindAccountStatus.BIND_CODE_SUCC)\n        {\n            HMDebugger.LogDebug("Bind callback - Bind successfully");\n            if (!BindInfo.userInfo.userID.Equals(_userId))\n            {\n                HMDebugger.LogDebug($"Bind callback - Bind successfully - Log in again userId:{BindInfo.userInfo.userID} _userId:{_userId}");\n                        \n                return;\n            }\n\n                HMToast.ShowToast("Binding successful");\n                return;\n        }\n\n        HMToast.ShowToast($"Binding failure {BindInfo.bindMsg}");\n    };\n}\n\npublic void ButtonEvent_BindAccount()\n{\n\n    HachiMgr.Instance.BindAccount(HMLoginType.LOGIN_BY_GOOGLE, _bindAccountCallback);\n}\n')),(0,i.kt)("h3",{id:"7forced-binding"},"7\u3001Forced binding"),(0,i.kt)("p",null,"When the user uses the social account that has been bound to bind the operation, the game can pop up the interface to list the two accounts and the corresponding game progress, for the player to choose which social account to bind. After the player selects, the mandatory binding interface can be called."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'void Start()\n{   \n    _bindAccountCallback = (BindInfo) =>\n    {\n    Debug.Log($"Bound callback {BindInfo.bindStatus} type:{BindInfo.userInfo.loginType} msg:{BindInfo.bindMsg} userId:{BindInfo.userInfo.userID} token:{BindInfo.userInfo.token} userIdList:{BindInfo.userIDs}");\n    if (BindInfo.bindStatus == HMBindAccountStatus.BIND_CODE_SELECT)\n    {\n        HMDebugger.LogDebug("Bind callback - Select screen");\n        return;\n    }\n\n    if (BindInfo.bindStatus == HMBindAccountStatus.BIND_CODE_SUCC)\n    {\n        HMDebugger.LogDebug("Bind callback - Bind successfully");\n        if (!BindInfo.userInfo.userID.Equals(_userId))\n        {\n            HMDebugger.LogDebug($"Bind callback - Bind successfully - Log in again userId:{BindInfo.userInfo.userID} _userId:{_userId}");\n                    \n            return;\n        }\n\n            HMToast.ShowToast("Binding successful");\n            return;\n    }\n\n    HMToast.ShowToast($"Binding failure {BindInfo.bindMsg}");\n    };\n}\n\npublic void ButtonEvent_ForceBindAccount()\n{\n    HachiMgr.Instance.ForceBindAccount("", _bindAccountCallback);\n}\n')),(0,i.kt)("h3",{id:"8automatic-login"},"8\u3001Automatic login"),(0,i.kt)("p",null,"The SDK automatically logs in based on the type of the last login. You can use the IsCanAutoLogin interface to determine whether the automatic login interface is available. If the automatic login interface is invoked when it is not available, a login failure message is displayed."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"HachiMgr.Instance.AutoLogin();\n")),(0,i.kt)("h3",{id:"9returns-the-current-account-type"},"9\u3001Returns the current account type"),(0,i.kt)("p",null,"After successful login, obtain the type of the current account. The game side can determine whether to display the binding interface according to the result returned by this interface."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"HMLoginType accountType = HachiMgr.Instance.GetAccountType();\n")),(0,i.kt)("h3",{id:"10returns-whether-automatic-login-is-currently-available"},"10\u3001Returns whether automatic login is currently available"),(0,i.kt)("p",null,"Based on the result returned by this interface, the game can determine whether it can directly invoke the 'AutoLogin' interface for automatic silent login. If not, you need to display the Login interface, and then call the 'login' interface according to the login type selected by the player."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"bool isCanAutoLogin = HachiMgr.Instance.IsCanAutoLogin();\n")),(0,i.kt)("h2",{id:"qa"},"Q&A"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 1\u3001 Can one Google Play Games Services account correspond to multiple game accounts? "),(0,i.kt)("br",{parentName:"p"}),"\n","No. One Google Play Games Services account can only correspond to one game account.  "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 2\u3001First call the visitor login, and then call Google Play Games Services login, at this time the tourist account and Google Play Games Services account will be bound\uff1f    "),(0,i.kt)("br",{parentName:"p"}),"\n","No. Calling visitor login first, and then calling Google Play Games Services login, will return a new UserID as a new account to play the game. Only when the binding interface is called, the binding of the visitor account and Google Play Games Services account will occur, returning the same UserID, that is, the UserID of the visitor account, using the same game process.\nHowever, the tourist UserID is related to the device ID, and if the device ID changes, the previous unbound tourist account may be lost.      "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 3\u3001Log in as a tourist first, return UserID1, after the game progress, select Google Play Games Services account binding, will my UserID change\uff1f"),(0,i.kt)("br",{parentName:"p"}),"\n","It won't change. After binding, the UserID is still UserID1, but a binding is made inside the SDK. Equivalent to the binding behavior of the tourist account, the return is still the original tourist account ID.    "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 4\u3001Enter the game select Google Play Games Services login, after the game progress, re-enter the game select visitors login, after the game progress, click Google Play Games Services account binding. What happens at this point\uff1f"),(0,i.kt)("br",{parentName:"p"}),"\n","When the Google Play Games Services account with existing progress is bound, the SDK will return two userids to the game, that is, the UserID corresponding to the current tourist account and the Google Play Games Services account with existing progress. The game can make its own interface to select the UserID corresponding to the Google Play Games Services account to be bound. Then the UserID selected by the player is passed to the SDK through the forced binding interface to forcibly bind the Google Play Games Services account.   "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 5\u3001For A game that defaults to visitor login, I first use device A to play progress and bind my only Google Play Games Services account, and then I use device B to play progress and bind my only Google Play Games Services account, what happens at this time? "),(0,i.kt)("br",{parentName:"p"}),"\n","This case is the same as 4, are bound to the existing Google Play Games Services account."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 6\u3001Will the newly generated userids be repeated?   "),(0,i.kt)("br",{parentName:"p"}),"\n","No. The newly generated userids are unique and will not be repeated.  "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"}," 7\u3001Can I verify the account system in Unity Editor?  "),(0,i.kt)("br",{parentName:"p"}),"\n","Agreed. The Unity Editor can debug the account system."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"")))}h.isMDXComponent=!0},6610:function(e,t,n){t.Z=n.p+"assets/images/login01-930a697a90a0026e6b85af51db505085.png"},8562:function(e,t,n){t.Z=n.p+"assets/images/login02-d48666f871dca5bc59be433892fbfd65.png"}}]);